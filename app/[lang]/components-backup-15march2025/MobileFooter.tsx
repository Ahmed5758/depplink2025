'use client'

import { usePathname } from "next/navigation"
import { useRouter } from 'next-nprogress-bar'
import React, { useState, useEffect } from 'react'
import { useParams } from 'next/navigation';
import { getCartCount } from '../cartstorage/cart'


export default function MobileFooter(props: any) {
    const path = usePathname()
    const router = useRouter()
    const params = useParams()
    const pathname = usePathname()
    const [userid, setUserid] = useState<any>(0)
    const [cartCount, setCartCount] = useState<any>(0)
    const [wishlistCount, setWishlistCount] = useState<any>(0)

    useEffect(() => {
        const intervalID = setInterval(() => {
            getCartFunction()
            DataLocalStorage()
        }, 1000);

    }, [props])

    const getCartFunction = async () => {
        setCartCount(getCartCount())
    }

    const DataLocalStorage = async () => {
        setUserid(localStorage.getItem("userid"))
        setWishlistCount(localStorage.getItem('wishlistCount'))
    }

    const origin =
        typeof window !== 'undefined' && window.location.origin
            ? window.location.origin
            : '';

    return (
        <>
            {path.indexOf('login') === -1
                && path.indexOf('otpconfirmation') === -1
                && path.indexOf('resetpassword') === -1
                && path.indexOf('resetusername') === -1
                && path.indexOf('signup') === -1
                && path.indexOf('checkout') === -1
                && path.indexOf('notifications') === -1
                && path.indexOf('product') === -1
                && path.indexOf('setting') === -1
                && path.indexOf('account/addressbook') === -1
                && path.indexOf('account/orderlisting') === -1
                && path.indexOf('account/profile') === -1
                && path.indexOf('account/orderdetails') === -1
                && path.indexOf('brandslisting') === -1
                && path.indexOf('contact-us') === -1
                && path.indexOf('projectsales') === -1
                && path.indexOf('giftcards') === -1
                && path.indexOf('giftcards/buy') === -1
                ?
                <div className="fixed bottom-0 bg-white z-30 w-full shadow-md border-t border-[#435B7120]">
                    {/* <div className="h-1" id="loader-spin"></div> */}
                    <div className="grid grid-cols-4 pt-3.5 pb-5 fill-[#435B71]">
                        <button onClick={() => router.push(`/${props?.lang}`)} disabled={path === `/${props?.lang}` ? true : false} className="focus-visible:outline-none mx-auto">
                            {pathname === `/${props?.lang}` ?
                                <svg height="26" viewBox="0 0 512 512" width="26" xmlns="http://www.w3.org/2000/svg" id="fi_1946436"><path d="m498.195312 222.695312c-.011718-.011718-.023437-.023437-.035156-.035156l-208.855468-208.847656c-8.902344-8.90625-20.738282-13.8125-33.328126-13.8125-12.589843 0-24.425781 4.902344-33.332031 13.808594l-208.746093 208.742187c-.070313.070313-.140626.144531-.210938.214844-18.28125 18.386719-18.25 48.21875.089844 66.558594 8.378906 8.382812 19.445312 13.238281 31.277344 13.746093.480468.046876.964843.070313 1.453124.070313h8.324219v153.699219c0 30.414062 24.746094 55.160156 55.167969 55.160156h81.710938c8.28125 0 15-6.714844 15-15v-120.5c0-13.878906 11.289062-25.167969 25.167968-25.167969h48.195313c13.878906 0 25.167969 11.289063 25.167969 25.167969v120.5c0 8.285156 6.714843 15 15 15h81.710937c30.421875 0 55.167969-24.746094 55.167969-55.160156v-153.699219h7.71875c12.585937 0 24.421875-4.902344 33.332031-13.808594 18.359375-18.371093 18.367187-48.253906.023437-66.636719zm0 0"></path></svg>
                                :
                                <svg height="26" viewBox="0 1 511 511.999" width="26" xmlns="http://www.w3.org/2000/svg" id="fi_1946488"><path d="m498.699219 222.695312c-.015625-.011718-.027344-.027343-.039063-.039062l-208.855468-208.847656c-8.902344-8.90625-20.738282-13.808594-33.328126-13.808594-12.589843 0-24.425781 4.902344-33.332031 13.808594l-208.746093 208.742187c-.070313.070313-.144532.144531-.210938.214844-18.28125 18.386719-18.25 48.21875.089844 66.558594 8.378906 8.382812 19.441406 13.234375 31.273437 13.746093.484375.046876.96875.070313 1.457031.070313h8.320313v153.695313c0 30.417968 24.75 55.164062 55.167969 55.164062h81.710937c8.285157 0 15-6.71875 15-15v-120.5c0-13.878906 11.292969-25.167969 25.171875-25.167969h48.195313c13.878906 0 25.167969 11.289063 25.167969 25.167969v120.5c0 8.28125 6.714843 15 15 15h81.710937c30.421875 0 55.167969-24.746094 55.167969-55.164062v-153.695313h7.71875c12.585937 0 24.421875-4.902344 33.332031-13.8125 18.359375-18.367187 18.367187-48.253906.027344-66.632813zm-21.242188 45.421876c-3.238281 3.238281-7.542969 5.023437-12.117187 5.023437h-22.71875c-8.285156 0-15 6.714844-15 15v168.695313c0 13.875-11.289063 25.164062-25.167969 25.164062h-66.710937v-105.5c0-30.417969-24.746094-55.167969-55.167969-55.167969h-48.195313c-30.421875 0-55.171875 24.75-55.171875 55.167969v105.5h-66.710937c-13.875 0-25.167969-11.289062-25.167969-25.164062v-168.695313c0-8.285156-6.714844-15-15-15h-22.328125c-.234375-.015625-.464844-.027344-.703125-.03125-4.46875-.078125-8.660156-1.851563-11.800781-4.996094-6.679688-6.679687-6.679688-17.550781 0-24.234375.003906 0 .003906-.003906.007812-.007812l.011719-.011719 208.847656-208.839844c3.234375-3.238281 7.535157-5.019531 12.113281-5.019531 4.574219 0 8.875 1.78125 12.113282 5.019531l208.800781 208.796875c.03125.03125.066406.0625.097656.09375 6.644531 6.691406 6.632813 17.539063-.03125 24.207032zm0 0"></path></svg>
                            }
                        </button>
                        <button onClick={() => router.push(userid ? `${origin}/${props?.lang}/account/wishlist` : `${origin}/${props?.lang}/login`)} className="focus-visible:outline-none mx-auto relative">
                            {wishlistCount > 0 ?
                                <span className="badge absolute -right-2 -top-1 bg-danger rounded-full bg-[#DC4E4E] text-[10px] text-white h-4 w-4 border-white border-2"></span>
                                : null}
                            {pathname === `/${props?.lang}/account/wishlist` ?
                                <svg id="fi_4240564" enableBackground="new 0 0 512 512" height="26" viewBox="0 0 512 512" width="26" xmlns="http://www.w3.org/2000/svg"><path clipRule="evenodd" d="m256 469.878c-86.27-49.763-253.779-170.182-255.971-290.334-2.395-131.178 145.05-190.67 255.971-77.883 110.905-112.771 258.343-53.318 255.971 77.86-2.171 120.16-169.697 240.59-255.971 290.357z" fillRule="evenodd"></path></svg>
                                :
                                <svg id="fi_3870922" height="26" viewBox="0 0 512 512" width="26" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="m489.864 101.1a130.755 130.755 0 0 0 -60.164-50.89c-28.112-11.8-59.687-13.924-91.309-6.127-28.978 7.146-57.204 22.645-82.391 45.129-25.189-22.486-53.418-37.986-82.4-45.131-31.623-7.8-63.2-5.674-91.312 6.134a130.755 130.755 0 0 0 -60.161 50.9c-15.02 23.744-22.661 52.619-22.097 83.5 2.504 137.285 207.006 262.122 247.976 285.755a16 16 0 0 0 15.989 0c40.974-23.636 245.494-148.495 247.976-285.779.558-30.879-7.086-59.751-22.107-83.491zm-9.887 82.916c-.8 44.388-30.39 96.139-85.563 149.655-51.095 49.558-109.214 86.912-138.414 104.293-29.2-17.378-87.31-54.727-138.4-104.287-55.176-53.512-84.766-105.259-85.576-149.646-.884-48.467 22.539-87.462 62.656-104.313a106.644 106.644 0 0 1 41.511-8.238c36.795 0 75.717 17.812 108.4 51.046a16 16 0 0 0 22.815 0c45.406-46.17 102.85-62.573 149.9-42.811 40.121 16.845 63.547 55.834 62.671 104.298z"></path></svg>
                            }
                        </button>
                        <button onClick={() => router.push(`${origin}/${props?.lang}/cart`)} className="focus-visible:outline-none mx-auto relative">
                            {cartCount > 0 ?
                                <span className="badge absolute -right-2 -top-1 bg-danger rounded-full bg-[#DC4E4E] text-[10px] text-white h-6 w-6 border-white border-2 flex items-center justify-center">{cartCount}</span>
                                : null}
                            {pathname === `/${props?.lang}/cart` ?
                                <svg height="28" viewBox="0 0 32 32" width="28" xmlns="http://www.w3.org/2000/svg" id="fi_2832517"><g id="Layer_2" data-name="Layer 2"><path d="m16 1a6 6 0 0 0 -6 6v1h-.83a3.27 3.27 0 0 0 -3.27 3.12l-.79 16.45a3.28 3.28 0 0 0 3.27 3.43h15.24a3.28 3.28 0 0 0 3.27-3.43l-.79-16.45a3.27 3.27 0 0 0 -3.27-3.12h-.83v-1a6 6 0 0 0 -6-6zm-4 6a4 4 0 0 1 8 0v1h-8zm-1.64 5.19a1 1 0 1 1 1 1 1 1 0 0 1 -1-1zm9.28 0a1 1 0 1 1 1 1 1 1 0 0 1 -1-1z"></path></g></svg>
                                :
                                <svg height="28" viewBox="0 0 32 32" width="28" xmlns="http://www.w3.org/2000/svg" id="fi_2832495"><g id="Layer_2" data-name="Layer 2"><path d="m16 1a6 6 0 0 0 -6 6v1h-.83a3.27 3.27 0 0 0 -3.27 3.12l-.79 16.45a3.28 3.28 0 0 0 3.27 3.43h15.24a3.28 3.28 0 0 0 3.27-3.43l-.79-16.45a3.27 3.27 0 0 0 -3.27-3.12h-.83v-1a6 6 0 0 0 -6-6zm-4 6a4 4 0 0 1 8 0v1h-8zm12.1 4.21.79 16.46a1.31 1.31 0 0 1 -.35.94 1.29 1.29 0 0 1 -.92.39h-15.24a1.29 1.29 0 0 1 -.92-.39 1.31 1.31 0 0 1 -.35-.94l.79-16.46a1.27 1.27 0 0 1 1.27-1.21h13.66a1.27 1.27 0 0 1 1.27 1.21z"></path><circle cx="11.36" cy="12.19" r="1"></circle><circle cx="20.64" cy="12.19" r="1"></circle></g></svg>
                            }
                        </button>
                        <button onClick={() => {
                            router.push(`${origin}/${props?.lang}/accountlisting`)
                        }} className="focus-visible:outline-none mx-auto">
                            {pathname === `/${props?.lang}/accountlisting` ?
                                <svg height="26" width="26" version="1.1" id="fi_456212" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enableBackground="new 0 0 512 512" xmlSpace="preserve">
                                    <path d="M256,0c-74.439,0-135,60.561-135,135s60.561,135,135,135s135-60.561,135-135S330.439,0,256,0z"></path>
                                    <path d="M423.966,358.195C387.006,320.667,338.009,300,286,300h-60c-52.008,0-101.006,20.667-137.966,58.195
                            C51.255,395.539,31,444.833,31,497c0,8.284,6.716,15,15,15h420c8.284,0,15-6.716,15-15
                            C481,444.833,460.745,395.539,423.966,358.195z"></path>
                                </svg>
                                :
                                <svg height="26" width="26" version="1.1" id="fi_709579" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512 512" enableBackground="new 0 0 512 512">
                                    <path d="M256,288.389c-153.837,0-238.56,72.776-238.56,204.925c0,10.321,8.365,18.686,18.686,18.686h439.747
                            c10.321,0,18.686-8.365,18.686-18.686C494.56,361.172,409.837,288.389,256,288.389z M55.492,474.628
                            c7.35-98.806,74.713-148.866,200.508-148.866s193.159,50.06,200.515,148.866H55.492z"></path>
                                    <path d="M256,0c-70.665,0-123.951,54.358-123.951,126.437c0,74.19,55.604,134.54,123.951,134.54s123.951-60.35,123.951-134.534
                            C379.951,54.358,326.665,0,256,0z M256,223.611c-47.743,0-86.579-43.589-86.579-97.168c0-51.611,36.413-89.071,86.579-89.071
                            c49.363,0,86.579,38.288,86.579,89.071C342.579,180.022,303.743,223.611,256,223.611z"></path>
                                </svg>
                            }
                        </button>
                        {/* <button onClick={() => router.push(`https://wa.me/9668002444464`)} className="focus-visible:outline-none mx-auto relative fill-[#25D366]">
                            <svg height="30" viewBox="0 0 512 512" width="30" xmlns="http://www.w3.org/2000/svg" id="fi_1384095"><path d="m435.921875 74.351562c-48.097656-47.917968-112.082031-74.3242182-180.179687-74.351562-67.945313 0-132.03125 26.382812-180.445313 74.289062-48.5 47.988282-75.234375 111.761719-75.296875 179.339844v.078125.046875c.0078125 40.902344 10.753906 82.164063 31.152344 119.828125l-30.453125 138.417969 140.011719-31.847656c35.460937 17.871094 75.027343 27.292968 114.933593 27.308594h.101563c67.933594 0 132.019531-26.386719 180.441406-74.296876 48.542969-48.027343 75.289062-111.71875 75.320312-179.339843.019532-67.144531-26.820312-130.882813-75.585937-179.472657zm-180.179687 393.148438h-.089844c-35.832032-.015625-71.335938-9.011719-102.667969-26.023438l-6.621094-3.59375-93.101562 21.175782 20.222656-91.90625-3.898437-6.722656c-19.382813-33.425782-29.625-70.324219-29.625-106.71875.074218-117.800782 96.863281-213.75 215.773437-213.75 57.445313.023437 111.421875 22.292968 151.984375 62.699218 41.175781 41.03125 63.84375 94.710938 63.824219 151.152344-.046875 117.828125-96.855469 213.6875-215.800781 213.6875zm0 0"></path><path d="m186.152344 141.863281h-11.210938c-3.902344 0-10.238281 1.460938-15.597656 7.292969-5.363281 5.835938-20.476562 19.941406-20.476562 48.628906s20.964843 56.40625 23.886718 60.300782c2.925782 3.890624 40.46875 64.640624 99.929688 88.011718 49.417968 19.421875 59.476562 15.558594 70.199218 14.585938 10.726563-.96875 34.613282-14.101563 39.488282-27.714844s4.875-25.285156 3.414062-27.722656c-1.464844-2.429688-5.367187-3.886719-11.214844-6.800782-5.851562-2.917968-34.523437-17.261718-39.886718-19.210937-5.363282-1.941406-9.261719-2.914063-13.164063 2.925781-3.902343 5.828125-15.390625 19.3125-18.804687 23.203125-3.410156 3.894531-6.824219 4.382813-12.675782 1.464844-5.851562-2.925781-24.5-9.191406-46.847656-29.050781-17.394531-15.457032-29.464844-35.167969-32.878906-41.003906-3.410156-5.832032-.363281-8.988282 2.570312-11.898438 2.628907-2.609375 6.179688-6.179688 9.105469-9.582031 2.921875-3.40625 3.753907-5.835938 5.707031-9.726563 1.949219-3.890625.972657-7.296875-.488281-10.210937-1.464843-2.917969-12.691406-31.75-17.894531-43.28125h.003906c-4.382812-9.710938-8.996094-10.039063-13.164062-10.210938zm0 0"></path></svg>
                        </button> */}
                    </div>
                </div>
                : null
            }
        </>
    )
}
