"use client"; // This is a client component ğŸ‘ˆğŸ½

import React, { Fragment, useEffect, useState } from 'react'
import 'moment/locale/ar'
import moment from 'moment'
import Link from 'next/link'
import Image from 'next/image'
import dynamic from 'next/dynamic'
import { getDictionary } from "../../../dictionaries";
import { usePathname } from "next/navigation"
import { useRouter } from 'next-nprogress-bar';
import { NewMedia } from '../../../api/Api';
import { get, post } from "../../../api/ApiCalls";
import Swal from 'sweetalert2'
import withReactContent from 'sweetalert2-react-content'
import { Dialog, Transition, RadioGroup } from '@headlessui/react'

const MobileHeader = dynamic(() => import('../../../components/MobileHeader'), { ssr: true })

export default function AddressDetails({ params }: { params: { lang: string, data: any, slug: string } }) {
    const router = useRouter();
    const path = usePathname();
    const [dict, setDict] = useState<any>([])
    const [selected, setSelected] = useState('0')
    const [orderDetails, setOrderDetails] = useState<any>([])
    const [addReviewsPop, setAddReviewsPop] = useState<boolean>(false)
    const [productReviewData, setProductReviewData] = useState<any>([])
    const [addRating, setAddRating] = useState<any>([]);
    const [addTitle, setAddTitle] = useState<any>([]);
    const [addReview, setAddReview] = useState<any>([]);


    const getOrderDetailsData = async () => {
        if (localStorage.getItem('userid')) {
            await get(`order-detail/${params.slug}`).then((responseJson: any) => {
                setOrderDetails(responseJson)
            })
            await get(`checkorder-review/${params.slug}/${localStorage.getItem('userid')}`).then((responseJson: any) => {
                setProductReviewData(responseJson?.data)
            })
        } else {
            router.push(`/${params.lang}`)
        }
    }

    useEffect(() => {
        (async () => {
            const translationdata = await getDictionary(params.lang);
            setDict(translationdata);
        })();
        getOrderDetailsData()
    }, [params])

    const SubmitReview = () => {
        var data = {
            user_id: localStorage.getItem('userid'),
            order_id: params.slug,
            addrating: addRating,
            addtitle: addTitle,
            addreview: addReview,
        }
        post('addproductreview', data).then(async (responseJson: any) => {
            if (responseJson?.success) {
                getOrderDetailsData()
                setAddReviewsPop(false)
                topMessageAlartSuccess(dict?.product?.addreview)
            }
            else {
                topMessageAlartDanger(dict?.product?.errorreview)
            }
        })
    }

    const MySwal = withReactContent(Swal);
    const topMessageAlartSuccess = (title: any) => {
        MySwal.fire({
            icon: "success",
            title:
                <div className="text-xs">
                    <div className="uppercase">{title}</div>
                </div>
            ,
            toast: true,
            position: params.lang == 'ar' ? 'top-start' : 'top-end',
            showConfirmButton: false,
            timer: 5000,
            showCloseButton: false,
            background: '#20831E',
            color: '#FFFFFF',
            timerProgressBar: true,
            customClass: {
                popup: `bg-success`,
            },
        });
    };

    const topMessageAlartDanger = (title: any) => {
        MySwal.fire({
            icon: "error",
            title:
                <div className="text-xs">
                    <div className="uppercase">{title}</div>
                </div>
            ,
            toast: true,
            position: params.lang == 'ar' ? 'top-start' : 'top-end',
            showConfirmButton: false,
            timer: 15000,
            showCloseButton: true,
            background: '#DC4E4E',
            color: '#FFFFFF',
            timerProgressBar: true,
        });
    };

    const origin =
        typeof window !== 'undefined' && window.location.origin
            ? window.location.origin
            : '';

    return (
        <>
            <MobileHeader type="Third" lang={params.lang} pageTitle={orderDetails?.orderdata?.order_no} />

            <div className="container md:py-4 py-16">
                <div className="flex items-start my-4 gap-x-5">

                    <div className="w-full">
                        <div className='font-bold text-base mb-4 flex items-center justify-between max-md:hidden'>
                            <h2>{params.lang == 'ar' ? 'ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨' : 'Order Details'}</h2>
                            <Link href={`${origin}/${params.lang}/account/orderlisting`} className='text-[#219EBC] hover:underline text-sm'>{params.lang == 'ar' ? 'Ø§Ù„Ù€Ø±Ø¬Ù€ÙˆØ¹' : 'Back'}</Link>
                        </div>

                        <div className="grid grid-cols-3 md:grid-cols-6 bg-white px-3 md:p-5 shadow-md rounded-md mb-3 text-sm">
                            <div className="text-[#1C262D85] max-md:my-4">
                                <h4 className="font-medium text-xs mb-1">{params.lang == 'ar' ? 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ' : 'Order Number'}:</h4>
                                <p className="font-medium text-[#004B7A]">{orderDetails?.orderdata?.order_no}</p>
                            </div>
                            <div className="text-[#1C262D85] max-md:my-4">
                                <h4 className="font-medium text-xs mb-1">{params.lang == 'ar' ? 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨' : 'Order Date'}:</h4>
                                <p className="font-medium text-[#004B7A]">{moment(orderDetails?.orderdata?.created_at).locale(params.lang == 'ar' ? 'ar' : 'en').format("MMM  DD, YYYY")}</p>
                            </div>
                            <div className="text-[#1C262D85] max-md:my-4">
                                <h4 className="font-medium text-xs mb-1">{params.lang == 'ar' ? 'ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙˆØµÙŠÙ„' : 'Date of Delivery'}:</h4>
                                <p className="font-medium text-[#004B7A]">{orderDetails?.orderdata?.delivery_date ? moment(orderDetails?.orderdata?.delivery_date).locale(params.lang == 'ar' ? 'ar' : 'en').format("MMM  DD, YYYY") : ''}</p>
                            </div>
                            <div className="text-[#1C262D85] max-md:my-4">
                                <h4 className="font-medium text-xs mb-1">{params.lang == 'ar' ? 'Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª' : 'No. of Products'}:</h4>
                                <p className="font-medium text-[#004B7A]">({orderDetails?.orderdata?.details_count}) {params.lang == 'ar' ? 'Ù…Ù†ØªØ¬Ø§Øª' : 'Items'}</p>
                            </div>
                            <div className="text-[#1C262D85] max-md:my-4 col-span-2">
                                <h4 className="font-medium text-xs mb-1">{params.lang == 'ar' ? 'Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨' : 'Order Status'}:</h4>
                                {orderDetails?.orderdata?.status === 0 ?
                                    <p className="font-medium text-[#20831E]">{params.lang == 'ar' ? 'ØªÙ… Ø§Ù„Ø¥Ø³ØªÙ„Ø§Ù…' : 'Received'}</p>
                                    :
                                    orderDetails?.orderdata?.status === 1 ?
                                        <p className="font-medium text-[#219EBC]">{params.lang == 'ar' ? 'ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯' : 'Confirmed'}</p>
                                        :
                                        orderDetails?.orderdata?.status === 2 ?
                                            <p className="font-medium text-[#20831E]">{params.lang == 'ar' ? 'Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°' : 'Processing'}</p>
                                            :
                                            orderDetails?.orderdata?.status === 3 ?
                                                <p className="font-medium text-[#219EBC]">{params.lang == 'ar' ? 'Ø®Ø±Ø¬ Ù„Ù„ØªÙˆØµÙŠÙ„' : 'Out for Delivery'}</p>
                                                :
                                                orderDetails?.orderdata?.status === 4 ?
                                                    <p className="font-medium text-[#20831E]">{params.lang == 'ar' ? 'ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„' : 'Delivered'}</p>
                                                    :
                                                    orderDetails?.orderdata?.status === 5 ?
                                                        <p className="font-medium text-[#DC4E4E]">{params.lang == 'ar' ? 'Ù…Ù„ØºÙŠ' : 'Cancel'}</p>
                                                        :
                                                        orderDetails?.orderdata?.status === 6 ?
                                                            <p className="font-medium text-[#DC4E4E]">{params.lang == 'ar' ? 'ØªÙ… Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹' : 'Refunded'}</p>
                                                            :
                                                            orderDetails?.orderdata?.status === 7 ?
                                                                <p className="font-medium text-[#DC4E4E]">{params.lang == 'ar' ? 'ÙØ´Ù„' : 'Failed'}</p>
                                                                :
                                                                orderDetails?.orderdata?.status === 8 ?
                                                                    <p className="font-medium text-[#00243c95]">{params.lang == 'ar' ? 'ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¯ÙØ¹' : 'Pending For Payment'}</p>
                                                                    :
                                                                    <p className="font-medium text-[#00243c95]">---</p>
                                }
                            </div>
                        </div>

                        <div className='my-4'>
                            <h2 className="font-bold text-base">{params.lang == 'ar' ? 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ ÙˆØ§Ù„Ø¯ÙØ¹' : 'Contact & Payment Information'}</h2>
                            <div className="border bg-white border-[#219EBC] rounded-md p-3 mt-2">
                                <div>
                                    <label className="font-regular text-[#5D686F] text-sm">{params.lang == 'ar' ? 'Ø§Ù„ØªÙˆØ§ØµÙ„' : 'Communication'}</label>
                                    <div className="flex items-center gap-x-2 mt-1 rtl:mt-2 text-[#004B7A] font-regular text-sm">
                                        <label className="">{orderDetails?.orderdata?.address?.user_data?.email}</label>
                                        <label className="">-</label>
                                        <label className="" dir="ltr">(966) {orderDetails?.orderdata?.address?.user_data?.phone_number}</label>
                                    </div>
                                    <hr className="opacity-10 my-3" />
                                </div>
                                <div>
                                    <label className="font-regular text-[#5D686F] text-sm">{params.lang == 'ar' ? 'Ø§Ù„Ø¹Ù†ÙˆØ§Ù†' : 'Address'}</label>
                                    <div className="flex items-center gap-x-2 mt-1 rtl:mt-2 text-[#004B7A] fill-[#004B7A] font-regular text-sm">
                                        <svg id="fi_3514361" height="28" viewBox="0 0 256 256" width="28" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="m128 138.184a5 5 0 0 1 -3.607-1.538c-2.075-2.16-50.808-53.259-50.808-82.228a54.415 54.415 0 1 1 108.83 0c0 28.969-48.733 80.068-50.808 82.228a5 5 0 0 1 -3.607 1.538zm0-128.184a44.465 44.465 0 0 0 -44.415 44.418c0 19.07 29.312 54.978 44.414 71.451 15.1-16.478 44.416-52.4 44.416-71.451a44.465 44.465 0 0 0 -44.415-44.418z"></path><path d="m128 76.153a21.735 21.735 0 1 1 21.735-21.735 21.759 21.759 0 0 1 -21.735 21.735zm0-33.47a11.735 11.735 0 1 0 11.735 11.735 11.748 11.748 0 0 0 -11.735-11.735z"></path><path d="m128.126 256a4.992 4.992 0 0 1 -2.5-.67l-77.175-44.559a5 5 0 0 1 -2.5-4.331v-38.385a5 5 0 0 1 10 0v35.5l72.175 41.67 72.174-41.67v-35.88a5 5 0 0 1 10 0v38.765a5 5 0 0 1 -2.5 4.331l-77.174 44.556a4.992 4.992 0 0 1 -2.5.673z"></path><path d="m128.126 166.884a4.992 4.992 0 0 1 -2.5-.67l-77.175-44.557a5 5 0 1 1 5-8.66l74.675 43.113 74.674-43.11a5 5 0 1 1 5 8.66l-77.174 44.557a4.992 4.992 0 0 1 -2.5.667z"></path><path d="m160.933 198.291a5 5 0 0 1 -3.459-1.389l-32.806-31.402a5 5 0 0 1 6.916-7.224l30.1 28.813 68.154-39.349-27.558-26.382-27.359-15.744a5 5 0 1 1 4.988-8.667l27.885 16.047a4.988 4.988 0 0 1 .964.721l32.806 31.407a5 5 0 0 1 -.958 7.942l-77.174 44.557a4.993 4.993 0 0 1 -2.499.67z"></path><path d="m95.067 198.525a4.985 4.985 0 0 1 -2.5-.67l-77.173-44.555a5 5 0 0 1 -.957-7.942l33.057-31.642a4.967 4.967 0 0 1 .957-.718l27.634-15.955a5 5 0 1 1 5 8.66l-27.112 15.653-27.807 26.616 68.154 39.348 30.349-29.048a5 5 0 1 1 6.914 7.224l-33.058 31.641a4.991 4.991 0 0 1 -3.458 1.388z"></path></svg>
                                        <div>
                                            <p className="font-bold">{orderDetails?.orderdata?.address?.address_label === 0 ? params.lang == 'ar' ? 'Ø§Ù„Ù€Ù€Ù…Ù†Ù€Ù€Ù€Ø²Ù„' : 'Home' : params.lang == 'ar' ? 'Ù…ÙƒØªØ¨' : 'Office'}</p>
                                            <label className="">{orderDetails?.orderdata?.address?.address}, {params.lang == 'ar' ? orderDetails?.orderdata?.address?.state_data?.name_arabic : orderDetails?.orderdata?.address?.state_data?.name}, {params.lang == 'ar' ? 'Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©' : 'Saudi Arabia'}</label>
                                        </div>
                                    </div>
                                    <hr className="opacity-10 my-3" />
                                </div>
                                <div className="text-sm font-medium">
                                    <label className="font-regular text-[#5D686F]">{params.lang == 'ar' ? 'Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„ØªÙˆØµÙŠÙ„' : 'Expected time for delivery'}</label>
                                    {/* <div className="flex items-center gap-x-2 mt-1 rtl:mt-2 text-[#004B7A] font-regular text-sm">
                                        <label className="">{params.lang == 'ar' ? 'ØºØ¯Ø§' : 'Tomorrow'} 12/11/2023</label>
                                        <label className="">-</label>
                                        <label className=""> {params.lang == 'ar' ? 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†' : 'Monday'} 13/11/2023</label>
                                    </div> */}
                                    <hr className="opacity-10 my-3" />
                                </div>
                                <div className="text-sm font-medium">
                                    <label className="font-regular text-[#5D686F]">{params.lang == 'ar' ? 'Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¬Ø²Ø¦ÙŠ' : 'Sub Total'}</label>
                                    <div className="gap-x-2 mt-1 rtl:mt-2 text-[#004B7A]">
                                        <label className="">{params.lang == 'ar' ? '' : 'SR'}{' '}
                                            {Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary?.filter((e: any) => e.name == 'subtotal')[0]?.price)}{' '}{params.lang == 'ar' ? 'Ø±.Ø³' : ''}</label>
                                    </div>
                                    <hr className="opacity-10 my-3" />
                                </div>
                                {orderDetails?.orderdata?.ordersummary?.filter((e: any) => e.name == 'shipping').length ?
                                    <div className="text-sm font-medium">
                                        <label className="font-regular text-[#5D686F]">{params.lang == 'ar' ? 'Ø³Ø¹Ø± Ø§Ù„ØªÙˆØµÙŠÙ„' : 'Shipping Charges'}</label>
                                        <div className="gap-x-2 mt-1 rtl:mt-2 text-[#004B7A]">
                                            <label className="">{orderDetails?.orderdata?.ordersummary?.filter((e: any) => e.name == 'shipping')[0]?.price == 0 ? params.lang == 'ar' ? 'Ù…Ù€Ø¬Ù€Ø§Ù†ÙŠ' : `Free` : `${params.lang == 'ar' ? '' : 'SR'} ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary?.filter((e: any) => e.name == 'shipping')[0]?.price)} ${params.lang == 'ar' ? 'Ø±.Ø³' : ''}`}</label>
                                        </div>
                                        <hr className="opacity-10 my-3" />
                                    </div>
                                    : null}
                                <div className="text-sm font-medium">
                                    <label className="font-regular text-[#5D686F]">{params.lang == 'ar' ? 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø©' : 'Total Value'}</label>
                                    <div className="gap-x-2 mt-1 rtl:mt-2 text-[#004B7A]">
                                        <label className="">{params.lang == 'ar' ? '' : 'SR'}{' '}{Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary?.filter((e: any) => e.name == 'total')[0]?.price)}{' '}{params.lang == 'ar' ? 'Ø±.Ø³' : ''}</label>
                                    </div>
                                    <hr className="opacity-10 my-3" />
                                </div>
                                <div className="text-sm font-medium">
                                    <div className='text-sm font-medium flex items-center justify-between'>
                                        <div>
                                            <label className="font-regular text-[#5D686F]">{params.lang == 'ar' ? 'Ø§Ù„Ø¯ÙØ¹ Ø¹Ù† Ø·Ø±ÙŠÙ‚' : 'Payment via'}{' '}
                                                <span className="font-bold text-[#004B7A]">
                                                    {
                                                        orderDetails?.orderdata?.paymentmethod == 'tamara' ? params.lang == 'ar' ? 'ØªÙ…Ø§Ø±Ø§' : 'Tamara'
                                                            : orderDetails?.orderdata?.paymentmethod == 'tabby' ? params.lang == 'ar' ? 'ØªØ§Ø¨ÙŠ' : 'Tabby'
                                                                : orderDetails?.orderdata?.paymentmethod == 'tasheel' ? params.lang == 'ar' ? 'Ø¨Ø³ÙŠØ·Ù‡' : 'Baseeta'
                                                                    : orderDetails?.orderdata?.paymentmethod == 'madapay' ? params.lang == 'ar' ? 'Ø¨Ø·Ø§Ù‚Ø§Øª Ù…Ø¯Ù‰' : 'Mada Card'
                                                                        : orderDetails?.orderdata?.paymentmethod == 'applepay' ? params.lang == 'ar' ? 'Ø¢Ø¨Ù„ Ø¨Ø§ÙŠ' : 'Apple Pay'
                                                                            : orderDetails?.orderdata?.paymentmethod == 'hyperpay' ? params.lang == 'ar' ? 'Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø¦ØªÙ…Ø§Ù†ÙŠØ©' : 'Debit & Credit Card'
                                                                                : orderDetails?.orderdata?.paymentmethod == 'cod' ? params.lang == 'ar' ? 'Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…' : 'Cash on Delivery'
                                                                                    : null
                                                    }
                                                </span>
                                            </label>
                                            <div className="gap-x-2 mt-1 rtl:mt-2 text-[#004B7A]">
                                                {orderDetails?.orderdata?.status === 5 ?
                                                    <label>{params.lang == 'ar' ? 'Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø£Ù…Ø±' : 'Order Has been Canceled'}</label>
                                                    :
                                                    orderDetails?.orderdata?.status === 6 ?
                                                        <label>{params.lang == 'ar' ? 'ØªÙ… Ø±Ø¯ Ø§Ù„Ø·Ù„Ø¨' : 'Refunded'}</label>
                                                        :
                                                        orderDetails?.orderdata?.status === 7 ?
                                                            <label>{params.lang == 'ar' ? 'ÙØ´Ù„ Ø§Ù„Ø·Ù„Ø¨' : 'Failed'}</label>
                                                            :
                                                            orderDetails?.orderdata?.status === 8 ?
                                                                <label>{params.lang == 'ar' ? 'ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¯ÙØ¹' : 'Pending For Payment'}</label>
                                                                :
                                                                <label>
                                                                    {
                                                                        orderDetails?.orderdata?.paymentmethod == 'tamara' ? params.lang == 'ar' ? `ØºØ¯Ø§ ØªÙ‚Ø³ÙŠØ· Ø¹Ù„ÙŠ 4 Ø´Ù‡ÙˆØ± Ø¨Ù…Ø¨Ù„Øº ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price / 4)} Ø±ÙŠØ§Ù„ ÙÙŠ Ø§Ù„Ø´Ù‡Ø±` : `Installments for 4 months at an amount of SR ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price / 4)} per month`
                                                                            : orderDetails?.orderdata?.paymentmethod == 'tabby' ? params.lang == 'ar' ? `ØºØ¯Ø§ ØªÙ‚Ø³ÙŠØ· Ø¹Ù„ÙŠ 4 Ø´Ù‡ÙˆØ± Ø¨Ù…Ø¨Ù„Øº ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price / 4)} Ø±ÙŠØ§Ù„ ÙÙŠ Ø§Ù„Ø´Ù‡Ø±` : `Installments for 4 months at an amount of SR ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price / 4)} per month`
                                                                                : orderDetails?.orderdata?.paymentmethod == 'tasheel' ? params.lang == 'ar' ? `ØºØ¯Ø§ ØªÙ‚Ø³ÙŠØ· Ø¹Ù„ÙŠ 36 Ø´Ù‡ÙˆØ± Ø¨Ù…Ø¨Ù„Øº ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price / 36)} Ø±ÙŠØ§Ù„ ÙÙŠ Ø§Ù„Ø´Ù‡Ø±` : `Installments for 36 months at an amount of SR ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price / 36)} per month`
                                                                                    : orderDetails?.orderdata?.paymentmethod == 'madapay' ? params.lang == 'ar' ? `Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù†Ù‚Ø¯ÙŠ ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price)}` : `Instant pay SR ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price)}`
                                                                                        : orderDetails?.orderdata?.paymentmethod == 'applepay' ? params.lang == 'ar' ? `Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù†Ù‚Ø¯ÙŠ ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price)}` : `Instant pay SR ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price)}`
                                                                                            : orderDetails?.orderdata?.paymentmethod == 'hyperpay' ? params.lang == 'ar' ? `Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù†Ù‚Ø¯ÙŠ ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price)}` : `Instant pay SR ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price)}`
                                                                                                : orderDetails?.orderdata?.paymentmethod == 'cod' ? params.lang == 'ar' ? `Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price)}` : `Paid upon delivery SR ${Intl.NumberFormat('en-US').format(orderDetails?.orderdata?.ordersummary.filter((element: any) => element.name == 'total')[0]?.price)}`
                                                                                                    : null
                                                                    }
                                                                </label>
                                                }
                                            </div>
                                        </div>
                                        {orderDetails?.orderdata?.paymentmethod == 'hyperpay' ?
                                            <Image
                                                src={params.lang == 'ar' ? '/images/master.webp' : '/images/master.webp'}
                                                alt={orderDetails?.orderdata?.paymentmethod}
                                                title={orderDetails?.orderdata?.paymentmethod}
                                                height={60}
                                                width={60}
                                                loading='lazy'
                                                className="rounded-md"
                                            />
                                            : null}
                                        {orderDetails?.orderdata?.paymentmethod == 'madapay' ?
                                            <Image
                                                src={params.lang == 'ar' ? '/images/mada.webp' : '/images/mada.webp'}
                                                alt={orderDetails?.orderdata?.paymentmethod}
                                                title={orderDetails?.orderdata?.paymentmethod}
                                                height={60}
                                                width={60}
                                                loading='lazy'
                                                className="rounded-md"
                                            />
                                            : null}
                                        {orderDetails?.orderdata?.paymentmethod == 'applepay' ?
                                            <Image
                                                src={params.lang == 'ar' ? '/images/applepay.webp' : '/images/applepay.webp'}
                                                alt={orderDetails?.orderdata?.paymentmethod}
                                                title={orderDetails?.orderdata?.paymentmethod}
                                                height={60}
                                                width={60}
                                                loading='lazy'
                                                className="rounded-md"
                                            />
                                            : null}
                                        {orderDetails?.orderdata?.paymentmethod == 'cod' ?
                                            <Image
                                                src={params.lang == 'ar' ? '/images/cod.webp' : '/images/cod.webp'}
                                                alt={orderDetails?.orderdata?.paymentmethod}
                                                title={orderDetails?.orderdata?.paymentmethod}
                                                height={60}
                                                width={60}
                                                loading='lazy'
                                                className="rounded-md"
                                            />
                                            : null}
                                        {orderDetails?.orderdata?.paymentmethod == 'tabby' ?
                                            <Image
                                                src={params.lang == 'ar' ? '/images/tabby-ar.webp' : '/images/tabby-en.webp'}
                                                alt={orderDetails?.orderdata?.paymentmethod}
                                                title={orderDetails?.orderdata?.paymentmethod}
                                                height={60}
                                                width={60}
                                                loading='lazy'
                                                className="rounded-md"
                                            />
                                            : null}
                                        {orderDetails?.orderdata?.paymentmethod == 'tamara' ?
                                            <Image
                                                src={params.lang == 'ar' ? '/images/tamara-ar.webp' : '/images/tamara-en.webp'}
                                                alt={orderDetails?.orderdata?.paymentmethod}
                                                title={orderDetails?.orderdata?.paymentmethod}
                                                height={60}
                                                width={60}
                                                loading='lazy'
                                                className="rounded-md"
                                            />
                                            : null}
                                        {orderDetails?.orderdata?.paymentmethod == 'tasheel' ?
                                            <Image
                                                src={params.lang == 'ar' ? '/images/baseeta.webp' : '/images/baseeta.webp'}
                                                alt={orderDetails?.orderdata?.paymentmethod}
                                                title={orderDetails?.orderdata?.paymentmethod}
                                                height={60}
                                                width={60}
                                                loading='lazy'
                                                className="rounded-md"
                                            />
                                            : null}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className='my-4'>
                            <div className="flex items-center justify-between">
                                <h2 className="font-bold text-base">{params.lang == 'ar' ? 'Ù…Ø­ØªÙˆÙŠ Ø§Ù„Ø·Ù„Ø¨' : 'Products'}</h2>
                                <button className="text-sm font-semibold underline text-[#004B7A]">
                                    {params.lang === 'ar' ? 'Ø§Ø®ØªØ± Ø§Ù„ÙƒÙ„' : 'Select All'}
                                </button>
                            </div>
                            <div className="mt-1 max-md:pb-32">
                                <RadioGroup value={selected} onChange={setSelected}>
                                    <RadioGroup.Label className="sr-only">{params.lang == 'ar' ? 'Ù…Ù†ØªØ¬Ø§Øª' : 'Server size'}</RadioGroup.Label>
                                    <div className="space-y-2">
                                        {orderDetails?.orderdata?.details?.map((data: any, i: React.Key | null | undefined) => {
                                            return (
                                                <RadioGroup.Option
                                                    key={i}
                                                    value={i}
                                                    className={({ active, checked }) => ` ${checked ? '' : ''} relative focus:outline-none`}
                                                >
                                                    {({ active, checked }) => (
                                                        <>
                                                            <div className={`bg-white rounded-md shadow-md flex items-center gap-x-4 mb-4 p-2 max-md:relative border ${checked ? 'border-[#219EBC]' : 'border-transparent'}`} key={i}>
                                                                <div className="md:relative md:w-44 flex items-center">
                                                                    {checked ?
                                                                        <svg viewBox="0 0 24 24" fill="none" className="h-6 w-6 max-md:absolute max-md:top-2 right-2">
                                                                            <circle cx={12} cy={12} r={12} fill="#219EBC" opacity="0.2" />
                                                                            <path
                                                                                d="M7 13l3 3 7-7"
                                                                                stroke="#219EBC"
                                                                                strokeWidth={2}
                                                                                strokeLinecap="round"
                                                                                strokeLinejoin="round"
                                                                            />
                                                                        </svg>
                                                                        :
                                                                        <svg viewBox="0 0 24 24" fill="#219EBC60" className="h-6 w-6 max-md:absolute max-md:top-2 right-2">
                                                                            <circle cx={12} cy={12} r={12} fill="#219EBC60" opacity={0.2} />
                                                                        </svg>
                                                                    }
                                                                    <Image
                                                                        src={data?.product_data?.featured_image?.image ? NewMedia + data?.product_data?.featured_image?.image : 'https://partners.tamkeenstores.com.sa/public/assets/new-media/3f4a05b645bdf91af2a0d9598e9526181714129744.png'}
                                                                        alt={params.lang == 'ar' ? data?.product_data?.name_arabic : data?.product_data?.name}
                                                                        title={params.lang == 'ar' ? data?.product_data?.name_arabic : data?.product_data?.name}
                                                                        height={50}
                                                                        width={50}
                                                                        loading='lazy'
                                                                        className="mx-auto"
                                                                    />
                                                                </div>
                                                                <div className="p-3 w-full">
                                                                    <h4 className="text-primary text-xs md:text-sm">{params.lang == 'ar' ? data?.product_data?.name_arabic : data?.product_data?.name}</h4>
                                                                    <h2 className="text-base md:text-xl font-semibold text-dark mt-2">{params.lang == 'ar' ? `${Intl.NumberFormat('en-US').format(data?.product_data?.sale_price)} Ø±.Ø³` : `SR ${Intl.NumberFormat('en-US').format(data?.product_data?.sale_price)}`}{'  '}<span className="text-xs md:text-sm text-[#DC4E4E] line-through decoration-[#DC4E4E] decoration-2 font-medium">{params.lang == 'ar' ? `${Intl.NumberFormat('en-US').format(data?.product_data?.price)} Ø±.Ø³` : `SR ${Intl.NumberFormat('en-US').format(data?.product_data?.price)}`}</span></h2>
                                                                    <div className="text-[#5D686F] text-sm flex items-center gap-x-2 mt-4 justify-between">
                                                                        <div className="flex items-center gap-x-2">
                                                                            <p>{params.lang == 'ar' ? 'Ø§Ù„Ø¹Ù„Ø§Ù…Ø©' : 'Brand'}:</p>
                                                                            {data?.product_data?.brand?.brand_media_image?.image ?
                                                                                <Image
                                                                                    src={data?.product_data?.brand?.brand_media_image?.image ? NewMedia + data?.product_data?.brand?.brand_media_image?.image : 'https://partners.tamkeenstores.com.sa/public/assets/new-media/3f4a05b645bdf91af2a0d9598e9526181714129744.png'}
                                                                                    alt={params.lang == 'ar' ? data?.product_data?.brand?.name_arabic : data?.product_data?.brand?.name}
                                                                                    title={params.lang == 'ar' ? data?.product_data?.brand?.name_arabic : data?.product_data?.brand?.name}
                                                                                    height={60}
                                                                                    width={60}
                                                                                    className="h-full"
                                                                                    loading='lazy'
                                                                                />
                                                                                :
                                                                                <p className="font-bold text-xs">{params.lang == 'ar' ? data?.product_data?.brand?.name_arabic : data?.product_data?.brand?.name}</p>
                                                                            }
                                                                        </div>
                                                                        <p className="font-bold">{params.lang == 'ar' ? 'Ø¹Ø¯Ø¯' : 'Qty'} {data?.quantity}</p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </>
                                                    )}
                                                </RadioGroup.Option>
                                            )
                                        })
                                        }
                                    </div>
                                </RadioGroup>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div className="fixed bottom-0 w-full p-3 bg-white shadow-md border-t border-[#5D686F26]">
                <div className="flex items-center justify-between mb-2 gap-2">
                    <button
                        type="button"
                        onClick={() => setAddReviewsPop(true)}
                        className="focus-visible:outline-none border border-[#004B7A] bg-[#004B7A] text-white text-xs font-semibold px-5 py-3 rounded-md shadow-md hover:shadow-none w-1/2"
                    >
                        {params.lang == 'ar' ? 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬' : "Add Product Review's"}
                    </button>
                    <button
                        type="button"
                        className="focus-visible:outline-none border border-[#004B7A] bg-[#004B7A] text-white text-xs font-semibold px-5 py-3 rounded-md shadow-md hover:shadow-none w-1/2"
                    >
                        {params.lang == 'ar' ? 'Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ ØµÙŠØ§Ù†Ø©' : "Create Maintainance Request"}
                    </button>
                </div>
                <button
                    type="button"
                    className="w-full focus-visible:outline-none border border-[#DC4E4E] bg-[#DC4E4E] text-white text-xs font-semibold px-3.5 py-3 rounded-md shadow-md hover:shadow-none"
                >
                    {params.lang == 'ar' ? 'Ø¥Ù„ØºØ§Ø¡ Ø·Ù„Ø¨' : 'Cancel Order'}
                </button>
            </div>
            {/* Order Rating */}
            <Transition appear show={addReviewsPop} as={Fragment}>
                <Dialog as="div" className="relative z-20" onClose={() => setAddReviewsPop(false)}>
                    <div className="fixed inset-0 bg-dark/40" aria-hidden="true" />
                    <div className="fixed inset-0 overflow-y-auto">
                        <div className="flex md:min-h-full h-full items-center justify-center md:p-4 text-center">
                            <Transition.Child
                                as={Fragment}
                                enter="ease-out duration-300"
                                enterFrom="opacity-0 scale-95"
                                enterTo="opacity-100 scale-100"
                                leave="ease-in duration-200"
                                leaveFrom="opacity-100 scale-100"
                                leaveTo="opacity-0 scale-95"
                            >
                                <Dialog.Panel className="w-full max-w-md max-md:h-[-webkit-fill-available] transform overflow-hidden rounded-md bg-white text-left align-middle shadow-xl transition-all">
                                    <Dialog.Title
                                        as="h3"
                                        className="text-lg font-medium leading-6 text-gray-900 container"
                                    >
                                        <div className="py-3.5 border-b mb-3 border-[#9CA4AB50]">
                                            <div className="flex items-center justify-between ">
                                                <Dialog.Title
                                                    as="h4"
                                                    className="text-lg font-bold leading-6 text-gray-900"
                                                >
                                                    {params.lang == 'ar' ? "ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬" : "Product Review's"}
                                                </Dialog.Title>
                                                <button onClick={() => setAddReviewsPop(false)} className="focus-visible:outline-none">
                                                    <svg height="16" viewBox="0 0 329.26933 329" width="16" xmlns="http://www.w3.org/2000/svg" id="fi_1828778"><path d="m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"></path></svg>
                                                </button>
                                            </div>
                                        </div>
                                    </Dialog.Title>
                                    <div className="mt-2 container">
                                        {orderDetails?.orderdata?.details?.map((data: any, i: any, adb: any) => {
                                            return (
                                                <div className="bg-white" key={i}>
                                                    <div className="flex items-center mb-2 gap-2">
                                                        <Image
                                                            src={data?.product_data?.featured_image?.image ? NewMedia + data?.product_data?.featured_image?.image : 'https://partners.tamkeenstores.com.sa/public/assets/new-media/3f4a05b645bdf91af2a0d9598e9526181714129744.png'}
                                                            alt={params.lang == 'ar' ? data?.product_data?.name_arabic : data?.product_data?.name}
                                                            title={params.lang == 'ar' ? data?.product_data?.name_arabic : data?.product_data?.name}
                                                            height={50}
                                                            width={50}
                                                            loading='lazy'
                                                            className=""
                                                        />
                                                        <div>
                                                            <h4 className="text-primary text-xs font-semibold line-clamp-1">{params.lang == 'ar' ? data?.product_data?.name_arabic : data?.product_data?.name}</h4>
                                                            <div className="flex items-center gap-x-2 text-xs">
                                                                <p className='text-xs'>{params.lang == 'ar' ? 'Ø§Ù„Ø¹Ù„Ø§Ù…Ø©' : 'Brand'}:</p>
                                                                {data?.product_data?.brand?.brand_media_image?.image ?
                                                                    <Image
                                                                        src={data?.product_data?.brand?.brand_media_image?.image ? NewMedia + data?.product_data?.brand?.brand_media_image?.image : 'https://partners.tamkeenstores.com.sa/public/assets/new-media/3f4a05b645bdf91af2a0d9598e9526181714129744.png'}
                                                                        alt={params.lang == 'ar' ? data?.product_data?.brand?.name_arabic : data?.product_data?.brand?.name}
                                                                        title={params.lang == 'ar' ? data?.product_data?.brand?.name_arabic : data?.product_data?.brand?.name}
                                                                        height={40}
                                                                        width={40}
                                                                        className="h-full"
                                                                        loading='lazy'
                                                                    />
                                                                    :
                                                                    <p className="font-bold text-xs">{params.lang == 'ar' ? data?.product_data?.brand?.name_arabic : data?.product_data?.brand?.name}</p>
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div className="w-full">
                                                        <div className="flex items-center gap-2">
                                                            <label className="text-xs font-semibold">{params.lang === 'ar' ? 'Ø­Ø¯Ø¯ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…' : 'Select Rating'}:</label>
                                                            <div className="flex items-center gap-1 my-2.5">
                                                                {productReviewData[data?.product_data?.sku]?.rating >= 1 ?
                                                                    <button className="focus-visible:outline-none fill-[#f36c32]">
                                                                        <svg height="18" width="18" viewBox="0 -10 511.99143 511" xmlns="http://www.w3.org/2000/svg" id="fi_1828961"><path d="m510.652344 185.882812c-3.371094-10.367187-12.566406-17.707031-23.402344-18.6875l-147.796875-13.417968-58.410156-136.75c-4.3125-10.046875-14.125-16.53125-25.046875-16.53125s-20.738282 6.484375-25.023438 16.53125l-58.410156 136.75-147.820312 13.417968c-10.835938 1-20.011719 8.339844-23.402344 18.6875-3.371094 10.367188-.257813 21.738282 7.9375 28.925782l111.722656 97.964844-32.941406 145.085937c-2.410156 10.667969 1.730468 21.699219 10.582031 28.097656 4.757813 3.457031 10.347656 5.183594 15.957031 5.183594 4.820313 0 9.644532-1.28125 13.953125-3.859375l127.445313-76.203125 127.421875 76.203125c9.347656 5.585938 21.101562 5.074219 29.933593-1.324219 8.851563-6.398437 12.992188-17.429687 10.582032-28.097656l-32.941406-145.085937 111.722656-97.964844c8.191406-7.1875 11.308594-18.535156 7.9375-28.925782zm-252.203125 223.722657"></path></svg>
                                                                    </button>
                                                                    :
                                                                    <button className={`focus-visible:outline-none fill-[${addRating[data?.product_data?.sku] >= 1 ? '#f36c32' : '#5D686F'}]`} onClick={(e) => {
                                                                        var rating: any = addRating
                                                                        rating[data?.product_data?.sku] = 1;
                                                                        setAddRating({ ...rating })

                                                                    }}>
                                                                        <svg height="18" width="18" viewBox="0 -10 511.99143 511" xmlns="http://www.w3.org/2000/svg" id="fi_1828961"><path d="m510.652344 185.882812c-3.371094-10.367187-12.566406-17.707031-23.402344-18.6875l-147.796875-13.417968-58.410156-136.75c-4.3125-10.046875-14.125-16.53125-25.046875-16.53125s-20.738282 6.484375-25.023438 16.53125l-58.410156 136.75-147.820312 13.417968c-10.835938 1-20.011719 8.339844-23.402344 18.6875-3.371094 10.367188-.257813 21.738282 7.9375 28.925782l111.722656 97.964844-32.941406 145.085937c-2.410156 10.667969 1.730468 21.699219 10.582031 28.097656 4.757813 3.457031 10.347656 5.183594 15.957031 5.183594 4.820313 0 9.644532-1.28125 13.953125-3.859375l127.445313-76.203125 127.421875 76.203125c9.347656 5.585938 21.101562 5.074219 29.933593-1.324219 8.851563-6.398437 12.992188-17.429687 10.582032-28.097656l-32.941406-145.085937 111.722656-97.964844c8.191406-7.1875 11.308594-18.535156 7.9375-28.925782zm-252.203125 223.722657"></path></svg>
                                                                    </button>
                                                                }

                                                                {productReviewData[data?.product_data?.sku]?.rating >= 2 ?
                                                                    <button className="focus-visible:outline-none fill-[#f36c32]">
                                                                        <svg height="18" width="18" viewBox="0 -10 511.99143 511" xmlns="http://www.w3.org/2000/svg" id="fi_1828961"><path d="m510.652344 185.882812c-3.371094-10.367187-12.566406-17.707031-23.402344-18.6875l-147.796875-13.417968-58.410156-136.75c-4.3125-10.046875-14.125-16.53125-25.046875-16.53125s-20.738282 6.484375-25.023438 16.53125l-58.410156 136.75-147.820312 13.417968c-10.835938 1-20.011719 8.339844-23.402344 18.6875-3.371094 10.367188-.257813 21.738282 7.9375 28.925782l111.722656 97.964844-32.941406 145.085937c-2.410156 10.667969 1.730468 21.699219 10.582031 28.097656 4.757813 3.457031 10.347656 5.183594 15.957031 5.183594 4.820313 0 9.644532-1.28125 13.953125-3.859375l127.445313-76.203125 127.421875 76.203125c9.347656 5.585938 21.101562 5.074219 29.933593-1.324219 8.851563-6.398437 12.992188-17.429687 10.582032-28.097656l-32.941406-145.085937 111.722656-97.964844c8.191406-7.1875 11.308594-18.535156 7.9375-28.925782zm-252.203125 223.722657"></path></svg>
                                                                    </button>
                                                                    :
                                                                    <button className={`focus-visible:outline-none fill-[${addRating[data?.product_data?.sku] >= 2 ? '#f36c32' : '#5D686F'}]`} onClick={(e) => {
                                                                        var rating: any = addRating
                                                                        rating[data?.product_data?.sku] = 2;
                                                                        setAddRating({ ...rating })
                                                                    }}>
                                                                        <svg height="18" width="18" viewBox="0 -10 511.99143 511" xmlns="http://www.w3.org/2000/svg" id="fi_1828961"><path d="m510.652344 185.882812c-3.371094-10.367187-12.566406-17.707031-23.402344-18.6875l-147.796875-13.417968-58.410156-136.75c-4.3125-10.046875-14.125-16.53125-25.046875-16.53125s-20.738282 6.484375-25.023438 16.53125l-58.410156 136.75-147.820312 13.417968c-10.835938 1-20.011719 8.339844-23.402344 18.6875-3.371094 10.367188-.257813 21.738282 7.9375 28.925782l111.722656 97.964844-32.941406 145.085937c-2.410156 10.667969 1.730468 21.699219 10.582031 28.097656 4.757813 3.457031 10.347656 5.183594 15.957031 5.183594 4.820313 0 9.644532-1.28125 13.953125-3.859375l127.445313-76.203125 127.421875 76.203125c9.347656 5.585938 21.101562 5.074219 29.933593-1.324219 8.851563-6.398437 12.992188-17.429687 10.582032-28.097656l-32.941406-145.085937 111.722656-97.964844c8.191406-7.1875 11.308594-18.535156 7.9375-28.925782zm-252.203125 223.722657"></path></svg>
                                                                    </button>
                                                                }

                                                                {productReviewData[data?.product_data?.sku]?.rating >= 3 ?
                                                                    <button className="focus-visible:outline-none fill-[#f3ac30]">
                                                                        <svg height="18" width="18" viewBox="0 -10 511.99143 511" xmlns="http://www.w3.org/2000/svg" id="fi_1828961"><path d="m510.652344 185.882812c-3.371094-10.367187-12.566406-17.707031-23.402344-18.6875l-147.796875-13.417968-58.410156-136.75c-4.3125-10.046875-14.125-16.53125-25.046875-16.53125s-20.738282 6.484375-25.023438 16.53125l-58.410156 136.75-147.820312 13.417968c-10.835938 1-20.011719 8.339844-23.402344 18.6875-3.371094 10.367188-.257813 21.738282 7.9375 28.925782l111.722656 97.964844-32.941406 145.085937c-2.410156 10.667969 1.730468 21.699219 10.582031 28.097656 4.757813 3.457031 10.347656 5.183594 15.957031 5.183594 4.820313 0 9.644532-1.28125 13.953125-3.859375l127.445313-76.203125 127.421875 76.203125c9.347656 5.585938 21.101562 5.074219 29.933593-1.324219 8.851563-6.398437 12.992188-17.429687 10.582032-28.097656l-32.941406-145.085937 111.722656-97.964844c8.191406-7.1875 11.308594-18.535156 7.9375-28.925782zm-252.203125 223.722657"></path></svg>
                                                                    </button>
                                                                    :
                                                                    <button className={`focus-visible:outline-none fill-[${addRating[data?.product_data?.sku] >= 3 ? '#f3ac30' : '#5D686F'}]`} onClick={(e) => {
                                                                        var rating: any = addRating
                                                                        rating[data?.product_data?.sku] = 3;
                                                                        setAddRating({ ...rating })
                                                                    }}>
                                                                        <svg height="18" width="18" viewBox="0 -10 511.99143 511" xmlns="http://www.w3.org/2000/svg" id="fi_1828961"><path d="m510.652344 185.882812c-3.371094-10.367187-12.566406-17.707031-23.402344-18.6875l-147.796875-13.417968-58.410156-136.75c-4.3125-10.046875-14.125-16.53125-25.046875-16.53125s-20.738282 6.484375-25.023438 16.53125l-58.410156 136.75-147.820312 13.417968c-10.835938 1-20.011719 8.339844-23.402344 18.6875-3.371094 10.367188-.257813 21.738282 7.9375 28.925782l111.722656 97.964844-32.941406 145.085937c-2.410156 10.667969 1.730468 21.699219 10.582031 28.097656 4.757813 3.457031 10.347656 5.183594 15.957031 5.183594 4.820313 0 9.644532-1.28125 13.953125-3.859375l127.445313-76.203125 127.421875 76.203125c9.347656 5.585938 21.101562 5.074219 29.933593-1.324219 8.851563-6.398437 12.992188-17.429687 10.582032-28.097656l-32.941406-145.085937 111.722656-97.964844c8.191406-7.1875 11.308594-18.535156 7.9375-28.925782zm-252.203125 223.722657"></path></svg>
                                                                    </button>
                                                                }

                                                                {productReviewData[data?.product_data?.sku]?.rating >= 4 ?
                                                                    <button className="focus-visible:outline-none fill-[#82ae04]">
                                                                        <svg height="18" width="18" viewBox="0 -10 511.99143 511" xmlns="http://www.w3.org/2000/svg" id="fi_1828961"><path d="m510.652344 185.882812c-3.371094-10.367187-12.566406-17.707031-23.402344-18.6875l-147.796875-13.417968-58.410156-136.75c-4.3125-10.046875-14.125-16.53125-25.046875-16.53125s-20.738282 6.484375-25.023438 16.53125l-58.410156 136.75-147.820312 13.417968c-10.835938 1-20.011719 8.339844-23.402344 18.6875-3.371094 10.367188-.257813 21.738282 7.9375 28.925782l111.722656 97.964844-32.941406 145.085937c-2.410156 10.667969 1.730468 21.699219 10.582031 28.097656 4.757813 3.457031 10.347656 5.183594 15.957031 5.183594 4.820313 0 9.644532-1.28125 13.953125-3.859375l127.445313-76.203125 127.421875 76.203125c9.347656 5.585938 21.101562 5.074219 29.933593-1.324219 8.851563-6.398437 12.992188-17.429687 10.582032-28.097656l-32.941406-145.085937 111.722656-97.964844c8.191406-7.1875 11.308594-18.535156 7.9375-28.925782zm-252.203125 223.722657"></path></svg>
                                                                    </button>
                                                                    :
                                                                    <button className={`focus-visible:outline-none fill-[${addRating[data?.product_data?.sku] >= 4 ? '#82ae04' : '#5D686F'}]`} onClick={(e) => {
                                                                        var rating: any = addRating
                                                                        rating[data?.product_data?.sku] = 4;
                                                                        setAddRating({ ...rating })
                                                                    }}>
                                                                        <svg height="18" width="18" viewBox="0 -10 511.99143 511" xmlns="http://www.w3.org/2000/svg" id="fi_1828961"><path d="m510.652344 185.882812c-3.371094-10.367187-12.566406-17.707031-23.402344-18.6875l-147.796875-13.417968-58.410156-136.75c-4.3125-10.046875-14.125-16.53125-25.046875-16.53125s-20.738282 6.484375-25.023438 16.53125l-58.410156 136.75-147.820312 13.417968c-10.835938 1-20.011719 8.339844-23.402344 18.6875-3.371094 10.367188-.257813 21.738282 7.9375 28.925782l111.722656 97.964844-32.941406 145.085937c-2.410156 10.667969 1.730468 21.699219 10.582031 28.097656 4.757813 3.457031 10.347656 5.183594 15.957031 5.183594 4.820313 0 9.644532-1.28125 13.953125-3.859375l127.445313-76.203125 127.421875 76.203125c9.347656 5.585938 21.101562 5.074219 29.933593-1.324219 8.851563-6.398437 12.992188-17.429687 10.582032-28.097656l-32.941406-145.085937 111.722656-97.964844c8.191406-7.1875 11.308594-18.535156 7.9375-28.925782zm-252.203125 223.722657"></path></svg>
                                                                    </button>
                                                                }

                                                                {productReviewData[data?.product_data?.sku]?.rating >= 5 ?
                                                                    <button className="focus-visible:outline-none fill-[#38ae04]">
                                                                        <svg height="18" width="18" viewBox="0 -10 511.99143 511" xmlns="http://www.w3.org/2000/svg" id="fi_1828961"><path d="m510.652344 185.882812c-3.371094-10.367187-12.566406-17.707031-23.402344-18.6875l-147.796875-13.417968-58.410156-136.75c-4.3125-10.046875-14.125-16.53125-25.046875-16.53125s-20.738282 6.484375-25.023438 16.53125l-58.410156 136.75-147.820312 13.417968c-10.835938 1-20.011719 8.339844-23.402344 18.6875-3.371094 10.367188-.257813 21.738282 7.9375 28.925782l111.722656 97.964844-32.941406 145.085937c-2.410156 10.667969 1.730468 21.699219 10.582031 28.097656 4.757813 3.457031 10.347656 5.183594 15.957031 5.183594 4.820313 0 9.644532-1.28125 13.953125-3.859375l127.445313-76.203125 127.421875 76.203125c9.347656 5.585938 21.101562 5.074219 29.933593-1.324219 8.851563-6.398437 12.992188-17.429687 10.582032-28.097656l-32.941406-145.085937 111.722656-97.964844c8.191406-7.1875 11.308594-18.535156 7.9375-28.925782zm-252.203125 223.722657"></path></svg>
                                                                    </button>
                                                                    :
                                                                    <button className={`focus-visible:outline-none fill-[${addRating[data?.product_data?.sku] >= 5 ? '#38ae04' : '#5D686F'}]`} onClick={(e) => {
                                                                        var rating: any = addRating
                                                                        rating[data?.product_data?.sku] = 5;
                                                                        setAddRating({ ...rating })
                                                                    }}>
                                                                        <svg height="18" width="18" viewBox="0 -10 511.99143 511" xmlns="http://www.w3.org/2000/svg" id="fi_1828961"><path d="m510.652344 185.882812c-3.371094-10.367187-12.566406-17.707031-23.402344-18.6875l-147.796875-13.417968-58.410156-136.75c-4.3125-10.046875-14.125-16.53125-25.046875-16.53125s-20.738282 6.484375-25.023438 16.53125l-58.410156 136.75-147.820312 13.417968c-10.835938 1-20.011719 8.339844-23.402344 18.6875-3.371094 10.367188-.257813 21.738282 7.9375 28.925782l111.722656 97.964844-32.941406 145.085937c-2.410156 10.667969 1.730468 21.699219 10.582031 28.097656 4.757813 3.457031 10.347656 5.183594 15.957031 5.183594 4.820313 0 9.644532-1.28125 13.953125-3.859375l127.445313-76.203125 127.421875 76.203125c9.347656 5.585938 21.101562 5.074219 29.933593-1.324219 8.851563-6.398437 12.992188-17.429687 10.582032-28.097656l-32.941406-145.085937 111.722656-97.964844c8.191406-7.1875 11.308594-18.535156 7.9375-28.925782zm-252.203125 223.722657"></path></svg>
                                                                    </button>
                                                                }

                                                            </div>
                                                        </div>
                                                        <div className="pb-3.5 pt-3 px-3 bg-white rounded-md border flex items-center border-[#5D686F30] gap-x-2 mb-1.5">
                                                            <input className="focus-visible:outline-none w-full text-xs font-normal" placeholder={params.lang === 'ar' ? 'Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª' : 'Subject'} type="text" value={productReviewData[data?.product_data?.sku] ? productReviewData[data?.product_data?.sku]?.title : addTitle[data?.product_data?.sku]} disabled={productReviewData[data?.product_data?.sku] ? true : false} onChange={(e) => {

                                                                var addtitle: any = addTitle
                                                                addtitle[data?.product_data?.sku] = e.target.value;
                                                                setAddTitle({ ...addtitle })
                                                            }} />
                                                        </div>
                                                        <div className="pb-3.5 pt-3 px-3 bg-white rounded-md border flex items-center border-[#5D686F30] gap-x-2 w-full">
                                                            <textarea className="focus-visible:outline-none w-full text-xs font-normal" placeholder={params.lang === 'ar' ? 'Ø§Ù„Ø¹Ù†ÙˆØ§Ù†' : 'Reviews'} value={productReviewData[data?.product_data?.sku] ? productReviewData[data?.product_data?.sku]?.review : addReview[data?.product_data?.sku]} disabled={productReviewData[data?.product_data?.sku] ? true : false} onChange={(e) => {

                                                                var addreview: any = addReview
                                                                addreview[data?.product_data?.sku] = e.target.value;
                                                                setAddReview({ ...addreview })
                                                            }} />
                                                        </div>
                                                    </div>
                                                    {i + 1 === adb?.length ?
                                                        null
                                                        :
                                                        <hr className="opacity-10 my-4" />
                                                    }
                                                </div>
                                            )
                                        })
                                        }
                                    </div>
                                    <div className="py-4 text-right">
                                        <div className="fixed bottom-0 w-full px-4 py-3 bg-white shadow-md border-t border-[#5D686F26]">
                                            <button onClick={() => SubmitReview()}
                                                className="focus-visible:outline-none btn border border-[#004B7A] bg-[#004B7A] p-2.5 rounded-md w-full text-white fill-white font-medium">
                                                {params.lang == 'ar' ? 'Ø§Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨' : "Add Review's"}
                                            </button>
                                        </div>
                                    </div>
                                </Dialog.Panel>
                            </Transition.Child>
                        </div>
                    </div>
                </Dialog>
            </Transition>
        </>
    )
}